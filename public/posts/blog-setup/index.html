<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Custom Domain on Github Pages with Cloudflare | Chun Wu</title>
<meta name=keywords content="cloudflare,github,dns"><meta name=description content="Keeping it simple"><meta name=author content="Me"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/blog-setup/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Custom Domain on Github Pages with Cloudflare"><meta property="og:description" content="Keeping it simple"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/blog-setup/"><meta property="og:image" content="http://localhost:1313/images/blog-setup/cloudflare.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-25T22:20:03+00:00"><meta property="article:modified_time" content="2024-05-25T22:20:03+00:00"><meta property="og:site_name" content="Chun Wu"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/blog-setup/cloudflare.png"><meta name=twitter:title content="Custom Domain on Github Pages with Cloudflare"><meta name=twitter:description content="Keeping it simple"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Custom Domain on Github Pages with Cloudflare","item":"http://localhost:1313/posts/blog-setup/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Custom Domain on Github Pages with Cloudflare","name":"Custom Domain on Github Pages with Cloudflare","description":"Keeping it simple","keywords":["cloudflare","github","dns"],"articleBody":"Let’s get started! As I had mentioned in a previous post, my desire is to eventually host everything on my own infrastructure and if time permits try to use a DIY solution. However, given that I want to start sharing my journey from day 0, I need a temporary solution that is reliable, quick to setup, and requires minimal effort. Today, I would like to share how I setup this blog using a static website generator Hugo hosted on Github Pages with a Custom DNS using Cloudflare.\nHugo Hugo is one of the most popular open-source static site generators. I have used it several times in the past for previous iterations of this blog and have found it a my goto choice when I need something quick.\nSince I most likely will not be able to do better job than the [quick-start] guide found on Hugo’s documentation site I will be a bit brief in this portion. I started with creating a new repository on Github for this site, aptly named chunwu.dev, and cloned the repository down onto my local machine.\nPlease note that if you decide not to have a custom domain for your site and wish to leverage the default domain that Github provides you must setup your repository name as .github.io. Otherwise your domain will come out as .github.com/, which may not be ideal.\nAfter I had Hugo installed and my Github repository cloned onto my machine, I created my site using the command hugo new site . Personally, I am a visual person so I start the web server right away with the defaults before I start modifying the site. You can do this by running hugo server -D in the directory of your site.\n*We are using -D to ensure that draft publications are also show locally but when running live we simply use hugo server.\nThere are many places on the web where you can find Hugo themes. However, for today I used https://themes.gohugo.io/ and after brief search I settled on a blog theme called PaperMod.\nI made some quick adjustments to my hugo.toml - a file used you to specify how you want the site. This can be it’s own tutorial For now I simply want to enable the theme, so I run echo \"theme = PaperMod\" \u003e\u003e hugo.toml. (hugo.toml and config.toml are interchangeable)\nYou should now be able to run your website.\nGithub Pages Now that you have a functioning website locally, we commit the code back to your remote repository. We won’t dive into the specifics of how to use Github as a Code Versioning System or leveraging Github Actions for CICD, I have implemented Github Actions on my repository to automate deployment This can also be discussed in a future tutorial if there is a desire for it.\nFor now once we have a running website from the previous step, within your working directory. I ran the following commands:\ngit commit . git commit -m \"Initial Commit\" git push Once your website is in the remote repository…\nNavigate to the Settings of your repository. On the left menu bar navigate to Pages. For Build and deployment, I have set my source as Github Actions. Go back to your local repository and create a folder called workflows inside a folder called .github Copy and paste the following YAML into a file like main.yaml # Sample workflow for building and deploying a Hugo site to GitHub Pages name: Deploy Hugo site to Pages on: # Runs on pushes targeting the default branch push: branches: - master # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages permissions: contents: read pages: write id-token: write # Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued. # However, do NOT cancel in-progress runs as we want to allow these production deployments to complete. concurrency: group: \"pages\" cancel-in-progress: false # Default to bash defaults: run: shell: bash jobs: # Build job build: runs-on: ubuntu-latest env: HUGO_VERSION: 0.126.0 steps: - name: Install Hugo CLI run: | wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \\ \u0026\u0026 sudo dpkg -i ${{ runner.temp }}/hugo.deb - name: Install Dart Sass run: sudo snap install dart-sass - name: Checkout uses: actions/checkout@v4 with: submodules: recursive fetch-depth: 0 - name: Setup Pages id: pages uses: actions/configure-pages@v4 - name: Install Node.js dependencies run: \"[[ -f package-lock.json || -f npm-shrinkwrap.json ]] \u0026\u0026 npm ci || true\" - name: Build with Hugo env: # For maximum backward compatibility with Hugo modules HUGO_ENVIRONMENT: production HUGO_ENV: production TZ: America/Los_Angeles run: | hugo \\ --gc \\ --minify \\ --baseURL \"${{ steps.pages.outputs.base_url }}/\" - name: Upload artifact uses: actions/upload-pages-artifact@v3 with: path: ./public # Deployment job deploy: environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} runs-on: ubuntu-latest needs: build steps: - name: Deploy to GitHub Pages id: deployment uses: actions/deploy-pages@v4 Almost there, we need to commit the changes from our local repository to our remote repository. At the root of your local repository:\ngit commit . git commit -m \"Added a Github Action\" git push If you navigate to your repository on Github and look at the Actions tab you should notice there is a workflow running called Deploy Hugo site to Pages. Once this Github Action runs it’s course you should be able to navigate to the domain Github provides you by default, in my case it is: https://cpwu.github.io/chunwu.dev/. When we setup Github Pages, you may have noticed a textbox under Custom domain that you can specify, it really is that simple.\nLet’s get a custom domain from Cloudflare\nCloudflare I have used a few domain name registrars in the past but most recently I moved over to Cloudflare. From what I understand, they offer domain registration with no mark-up pricing. However, there is a drawback some tlds may not be available. Luckily for me Cloudflare opened up the ability to purchase .dev domain’s last year. If you are not aware .dev must use an SSL certificate in order to load in major browsers. Github will take care if this for us.\nTo purchase a domain, create yourself an account on Cloudflare if you haven’t done so already and navigate to Domain Registration.\nUnder Domain Registration navigate to Register Domains. Search for the desired domain name you are looking for. In my case chunwu.dev was available for $10.18 USD. Add an A record for your newly purchased domain by specifying your domain name under Name and 185.199.108.153 for content. You can find the other Github IP addresses for Github pages here Website up! Now that you have your domain name setup, and your website published to Github pages you just need to navigate back to the Settings of your site’s Github repository. You should now be able to specify the domain name you purchased with Cloudflare into the textbox and after a few minutes your site will be live on the internet with a custom domain.\nAs previously mentioned, make sure you select the Enforce HTTPS option since this is a requirement for .dev domains and generally a good practice.\n","wordCount":"1188","inLanguage":"en","image":"http://localhost:1313/images/blog-setup/cloudflare.png","datePublished":"2024-05-25T22:20:03Z","dateModified":"2024-05-25T22:20:03Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/blog-setup/"},"publisher":{"@type":"Organization","name":"Chun Wu","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Chun Wu (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Chun Wu</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/archives/ title=archives><span>archives</span></a></li><li><a href=http://localhost:1313/categories/ title=categories><span>categories</span></a></li><li><a href=http://localhost:1313/tags/ title=tags><span>tags</span></a></li><li><a href=http://localhost:1313/search/ title=search><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Custom Domain on Github Pages with Cloudflare</h1><div class=post-description>Keeping it simple</div><div class=post-meta><span title='2024-05-25 22:20:03 +0000 +0000'>May 25, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1188 words&nbsp;·&nbsp;Me</div></header><figure class=entry-cover><img loading=eager src=http://localhost:1313/images/blog-setup/cloudflare.png alt=Cloudflare><p>Custom Domain for Github Pages</p></figure><div class=post-content><h2 id=lets-get-started>Let&rsquo;s get started!<a hidden class=anchor aria-hidden=true href=#lets-get-started>#</a></h2><p>As I had mentioned in a previous post, my desire is to eventually host everything on my own infrastructure and if time permits try to use a DIY solution. However, given that I want to start sharing my journey from day 0, I need a <code>temporary</code> solution that is reliable, quick to setup, and requires minimal effort. Today, I would like to share how I setup this blog using a static website generator <a href=https://gohugo.io/>Hugo</a> hosted on <a href=https://pages.github.com/>Github Pages</a> with a Custom DNS using <a href=https://www.cloudflare.com/>Cloudflare</a>.</p><h3 id=hugo>Hugo<a hidden class=anchor aria-hidden=true href=#hugo>#</a></h3><p>Hugo is one of the most popular open-source static site generators. I have used it several times in the past for previous iterations of this blog and have found it a my goto choice when I need something quick.</p><p>Since I most likely will not be able to do better job than the [quick-start] guide found on Hugo&rsquo;s documentation site I will be a bit brief in this portion. I started with creating a new repository on Github for this site, aptly named <code>chunwu.dev</code>, and cloned the repository down onto my local machine.</p><p><em>Please note that if you decide not to have a custom domain for your site and wish to leverage the default domain that Github provides you must setup your repository name as <code>&lt;user>.github.io</code>. Otherwise your domain will come out as <code>&lt;user>.github.com/&lt;repository-name></code>, which may not be ideal.</em></p><p>After I had Hugo installed and my Github repository cloned onto my machine, I created my site using the command <code>hugo new site &lt;repository></code>. Personally, I am a visual person so I start the web server right away with the defaults before I start modifying the site. You can do this by running <code>hugo server -D</code> in the directory of your site.</p><p>*We are using -D to ensure that <code>draft</code> publications are also show locally but when running live we simply use <code>hugo server</code>.</p><p>There are many places on the web where you can find Hugo themes. However, for today I used <a href=https://themes.gohugo.io/><code>https://themes.gohugo.io/</code></a> and after brief search I settled on a blog theme called <code>PaperMod</code>.</p><p>I made some quick adjustments to my <code>hugo.toml</code> - a file used you to specify how you want the site. <em>This can be it&rsquo;s own tutorial</em> For now I simply want to enable the theme, so I run <code>echo "theme = PaperMod" >> hugo.toml</code>. (hugo.toml and config.toml are interchangeable)</p><p>You should now be able to run your website.</p><h3 id=github-pages>Github Pages<a hidden class=anchor aria-hidden=true href=#github-pages>#</a></h3><p>Now that you have a functioning website locally, we commit the code back to your remote repository. We won&rsquo;t dive into the specifics of how to use Github as a Code Versioning System or leveraging Github Actions for CICD, <em>I have implemented Github Actions on my repository to automate deployment</em> This can also be discussed in a future tutorial if there is a desire for it.</p><p>For now once we have a running website from the previous step, within your working directory. I ran the following commands:</p><pre tabindex=0><code>git commit .
git commit -m &#34;Initial Commit&#34;
git push 
</code></pre><p>Once your website is in the remote repository&mldr;</p><ol><li>Navigate to the Settings of your repository.</li><li>On the left menu bar navigate to Pages.</li><li>For Build and deployment, I have set my source as Github Actions.</li><li>Go back to your local repository and create a folder called <code>workflows</code> inside a folder called <code>.github</code></li><li>Copy and paste the following YAML into a file like <code>main.yaml</code></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># Sample workflow for building and deploying a Hugo site to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo site to Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Runs on pushes targeting the default branch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Allows you to run this workflow manually from the Actions tab</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>workflow_dispatch</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>permissions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>contents</span><span class=p>:</span><span class=w> </span><span class=l>read</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pages</span><span class=p>:</span><span class=w> </span><span class=l>write</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>id-token</span><span class=p>:</span><span class=w> </span><span class=l>write</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>concurrency</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;pages&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>cancel-in-progress</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Default to bash</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>defaults</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>shell</span><span class=p>:</span><span class=w> </span><span class=l>bash</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Build job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>HUGO_VERSION</span><span class=p>:</span><span class=w> </span><span class=m>0.126.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install Hugo CLI</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \
</span></span></span><span class=line><span class=cl><span class=sd>          &amp;&amp; sudo dpkg -i ${{ runner.temp }}/hugo.deb          </span><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install Dart Sass</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>sudo snap install dart-sass</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=l>recursive</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/configure-pages@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install Node.js dependencies</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;[[ -f package-lock.json || -f npm-shrinkwrap.json ]] &amp;&amp; npm ci || true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build with Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># For maximum backward compatibility with Hugo modules</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>HUGO_ENVIRONMENT</span><span class=p>:</span><span class=w> </span><span class=l>production</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>HUGO_ENV</span><span class=p>:</span><span class=w> </span><span class=l>production</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>TZ</span><span class=p>:</span><span class=w> </span><span class=l>America/Los_Angeles</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          hugo \
</span></span></span><span class=line><span class=cl><span class=sd>            --gc \
</span></span></span><span class=line><span class=cl><span class=sd>            --minify \
</span></span></span><span class=line><span class=cl><span class=sd>            --baseURL &#34;${{ steps.pages.outputs.base_url }}/&#34;          </span><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upload artifact</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/upload-pages-artifact@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>./public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># Deployment job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>github-pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.deployment.outputs.page_url }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>needs</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/deploy-pages@v4</span><span class=w>
</span></span></span></code></pre></div><p>Almost there, we need to commit the changes from our local repository to our remote repository. At the root of your local repository:</p><pre tabindex=0><code>git commit .
git commit -m &#34;Added a Github Action&#34;
git push 
</code></pre><p>If you navigate to your repository on Github and look at the <code>Actions</code> tab you should notice there is a workflow running called <code>Deploy Hugo site to Pages</code>. <img loading=lazy src=/images/blog-setup/github-action.png alt="Github Action"></p><p>Once this Github Action runs it&rsquo;s course you should be able to navigate to the domain Github provides you by default, in my case it is: <code>https://cpwu.github.io/chunwu.dev/</code>. When we setup Github Pages, you may have noticed a textbox under <code>Custom domain</code> that you can specify, it really is that simple.</p><p>Let&rsquo;s get a custom domain from Cloudflare</p><h3 id=cloudflare>Cloudflare<a hidden class=anchor aria-hidden=true href=#cloudflare>#</a></h3><p>I have used a few domain name registrars in the past but most recently I moved over to Cloudflare. From what I understand, they offer domain registration with no mark-up pricing. However, there is a drawback some <code>tlds</code> may not be available. Luckily for me Cloudflare opened up the ability to purchase <code>.dev</code> domain&rsquo;s last year. If you are not aware <code>.dev</code> must use an SSL certificate in order to load in major browsers. Github will take care if this for us.</p><p>To purchase a domain, create yourself an account on Cloudflare if you haven&rsquo;t done so already and navigate to Domain Registration.</p><ol><li>Under Domain Registration navigate to Register Domains.</li><li>Search for the desired domain name you are looking for.</li><li>In my case <code>chunwu.dev</code> was available for $10.18 USD.</li><li>Add an <code>A</code> record for your newly purchased domain by specifying your domain name under <code>Name</code> and <code>185.199.108.153</code> for content. You can find the other Github IP addresses for Github pages <a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site>here</a></li></ol><p><img loading=lazy src=/images/blog-setup/cloudflare-dns-records.png alt="Cloudflare - DNS Records"></p><h3 id=website-up>Website up!<a hidden class=anchor aria-hidden=true href=#website-up>#</a></h3><p>Now that you have your domain name setup, and your website published to Github pages you just need to navigate back to the Settings of your site&rsquo;s Github repository. You should now be able to specify the domain name you purchased with Cloudflare into the textbox and after a few minutes your site will be live on the internet with a custom domain.</p><p><img loading=lazy src=/images/blog-setup/github-custom-domain.png alt="Github Pages - Custom Domain"></p><p><em>As previously mentioned, make sure you select the Enforce HTTPS option since this is a requirement for <code>.dev</code> domains and generally a good practice.</em></p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/cloudflare/>Cloudflare</a></li><li><a href=http://localhost:1313/tags/github/>Github</a></li><li><a href=http://localhost:1313/tags/dns/>Dns</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/im-back/><span class=title>Next »</span><br><span>I am back... again!</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Chun Wu</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>